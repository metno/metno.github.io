<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="Webmaster" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="IT.met.no"/>
    <meta property="og:url" content="."/>
    <meta property="og:site_name" content="IT.met.no"/>
    <meta property="og:type" content="website"/>

    <link rel="canonical" href="." />

    <title>IT.met.no</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" />

    <link rel="stylesheet" type="text/css" href="./theme/css/main.css" />
    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="IT.met.no Atom Feed" />

    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher: "",
            doNotHash: false,
            doNotCopy: false,
            hashAddressBar: false
        });
    </script>
</head>

<body id="index">
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                    <a href="./">IT.met.no </a>
                </h1>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li class="active"><a href="/index.html">home</a></li>
                            <li ><a href="/pages/about.html">about</a></li>
                            <li ><a href="/pages/howto.html">howto</a></li>
                            <li ><a href="#">|</a></li>
                            <li ><a href="./category/blog.html">blog</a></li>
                        </ul>

                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span9">
                <section>
                    <ol id="posts-list" class="hfeed" start="9">
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2015/03/configure-knife-and-test-kitchen-to-use-openstack.html" rel="bookmark" title="Permalink to How to Configure Knife and Test Kitchen to use OpenStack">
                                       How to Configure Knife and Test Kitchen to use OpenStack
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnesundmetno.html">arne.sund@met.no</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2015-03-09

        |
        tags:         <a href="./tag/knife.html">knife</a>
        <a href="./tag/kitchen.html">kitchen</a>
        <a href="./tag/openstack.html">openstack</a>
        <a href="./tag/chef.html">chef</a>
        <a href="./tag/nova.html">nova</a>
        <a href="./tag/neutron.html">neutron</a>
        <a href="./tag/glance.html">glance</a>
        <a href="./tag/tools.html">tools</a>
        <a href="./tag/howto.html">howto</a>



    
</footer><!-- /.post-info -->                                <p><em>Originally published on <a href="http://arnesund.com/2015/03/01/how-to-configure-knife-and-test-kitchen-to-use-openstack/">arnesund.com</a></em></p>
<p>When developing Chef cookbooks, Knife and Test Kitchen (hereafter just "Kitchen") are essential tools in the workflow. Both tools can be set up to use OpenStack to make it easy to create VMs for testing regardless of the capabilities of the workstation used. It's great for testing some new recipe in a cookbook or making sure changes do not break existing cookbook functionality. This post will go through the configuration of both tools to ensure they use OpenStack instead of the default Vagrant drivers.</p>
<h2>Install software and dependencies</h2>
<p>First, it is necessary to install the software, plugins and dependencies. Let's start with some basic packages:</p>
<div class="highlight"><pre>sudo apt-get install ruby1.9 git
sudo apt-get install make autoconf gcc g++ zlib1g-dev bundler
</pre></div>


<h3>Chef Development Kit</h3>
<p>The <a href="https://docs.chef.io/#chef-dk-title">Chef Development Kit</a> is a collection of very useful tools for any cookbook developer. It includes tools like Knife ...</p>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2015/03/configure-knife-and-test-kitchen-to-use-openstack.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2015/02/kodeklubben.html" rel="bookmark" title="Permalink to Kodeklubben">
                                       Kodeklubben
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/martinlsatrametno.html">martin.l.satra@met.no</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2015-02-20

        |
        tags:         <a href="./tag/visit.html">visit</a>
        <a href="./tag/code.html">code</a>
        <a href="./tag/examples.html">examples</a>
        <a href="./tag/presentations.html">presentations</a>



    
</footer><!-- /.post-info -->                                <p>Her finner du presentasjoner og kodeeksempler fra <a href="http://www.kidsakoder.no/kodeklubben/">Kodeklubben</a> sitt besøk på Meteorologisk institutt (MET) 18. februar 2015. Vi demonstrerer bruk av <a href="http://api.met.no">http://api.met.no</a> og kart-tjenestene til MET for bruk i egne kodeprosjekt.</p>
<h2>IPython Notebook</h2>
<p>Du må ha IPython Notebook installert for å kunne jobbe videre på Notebook-en vi laget på tirsdag. Se "Install" på <a href="http://ipython.org/">http://ipython.org</a> for informasjon om hvordan IPython Notebook kan installeres på forskjellige plattformer.</p>
<h2>Presentasjoner og kodeeksempler</h2>
<p>Her finner du alle presentasjoner og kodeeksempler vi gikk igjennom:</p>
<ol>
<li><a href="./files/itut/met_kodeklubben.pdf">Presentasjon av MET</a></li>
<li><a href="http://nbviewer.ipython.org/gist/anonymous/bf417150abe1f7dca2c3">IPython Notebook-en med blant annet eksempler på bruk av http://api.met.no</a></li>
<li><a href="./files/itut/kodeklubben.tgz">Presentasjon og kodeeksempler på bruk av kart-tjenestene til MET</a></li>
</ol>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2015/02/kodeklubben.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2015/02/use-cloud-init-to-customize-new-openstack-vms.html" rel="bookmark" title="Permalink to How to Use Cloud-init to Customize New OpenStack VMs">
                                       How to Use Cloud-init to Customize New OpenStack VMs
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnesundmetno.html">arne.sund@met.no</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2015-02-05

        |
        tags:         <a href="./tag/openstack.html">openstack</a>
        <a href="./tag/cloud-init.html">cloud-init</a>
        <a href="./tag/bootstrap.html">bootstrap</a>
        <a href="./tag/nova-boot.html">nova boot</a>
        <a href="./tag/ubuntu.html">ubuntu</a>
        <a href="./tag/cloud-config.html">cloud-config</a>
        <a href="./tag/howto.html">howto</a>



    
</footer><!-- /.post-info -->                                <p><em>Originally published on <a href="http://arnesund.com/2015/02/05/how-to-use-cloud-init-to-customize-new-openstack-vms/">arnesund.com</a></em></p>
<p>When creating a new instance (VM) on OpenStack with one of the standard <a href="http://cloud-images.ubuntu.com/releases/">Ubuntu Cloud images</a>, the next step is typically to install packages and configure applications. Instead of doing that manually every time, OpenStack enables automatic setup of new instances using <a href="http://cloudinit.readthedocs.org/en/latest/">Cloud-init</a>. Cloud-init runs on first boot of every new instance and initializes it according to a provided script or config file. The functionality is part of the Ubuntu image and works the same way regardless of the cloud provider used (Amazon, RackSpace, private OpenStack cloud). Cloud-init is also available for <a href="http://cloudinit.readthedocs.org/en/latest/topics/availability.html">other distributions</a> as well.</p>
<h2>Creating a customization script</h2>
<h3>Standard Bash script</h3>
<p>Perhaps the easiest way to get started is to create a standard Bash script that Cloud-init runs on first boot. Here is a simple example to get Apache2 up and running:</p>
<div class="highlight"><pre>cat &gt; cloudinit.sh <span class="s">&lt;&lt;EOF</span>
<span class="s">&gt; #!/bin/bash</span>
<span class="s">&gt; apt-get update</span>
<span class="s">&gt; apt-get -y install ...</span></pre></div>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2015/02/use-cloud-init-to-customize-new-openstack-vms.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2015/01/remove-kernel.html" rel="bookmark" title="Permalink to Remove unused kernels">
                                       Remove unused kernels
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulfheimsbakkmetno.html">arnulf.heimsbakk@met.no</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2015-01-20

        |
        tags:         <a href="./tag/bash.html">bash</a>
        <a href="./tag/oneliner.html">oneliner</a>
        <a href="./tag/precise.html">precise</a>
        <a href="./tag/kernel.html">kernel</a>



    
</footer><!-- /.post-info -->                                <p>Removes all but current kernel and headers for freeing up disk space. This is a note for internal use and tested for Ubuntu Precise. Use at your own risk :) </p>
<div class="highlight"><pre>dpkg-query -f <span class="s1">&#39;${Package}\n&#39;</span> -W <span class="p">|</span>  egrep <span class="s1">&#39;linux-(headers|image)-[[:digit:]].*(|-generic)&#39;</span> <span class="p">|</span> grep -v <span class="k">$(</span>uname -r <span class="p">|</span> sed <span class="s1">&#39;s/-generic//&#39;</span><span class="k">)</span> <span class="p">|</span> sudo xargs apt-get -q -q -yy --purge remove
</pre></div>


<h2>Breakdown</h2>
<ol>
<li>List all packages.</li>
<li>Find only linux-image and linux-header packages with version number, not the two main meta packages.</li>
<li>Remove the linux-image and linux-header for running kernel from the list.</li>
<li>Purge all listed packages from system without asking any questions.</li>
</ol>
<h6>vim: set syn=markdown spell spl=en:</h6>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2015/01/remove-kernel.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    <li>
                        <article>
                            <header>
                                <h1 class="entry-title">
                                    <a href="./posts/2015/01/vagrant-openstack.html" rel="bookmark" title="Permalink to Vagrant with OpenStack">
                                       Vagrant with OpenStack
                                    </a>
                                </h1>
                            </header>
                            <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="./author/arnulfheimsbakkmetno.html">arnulf.heimsbakk@met.no</a>
    </address>

    in <a href="./category/blog.html">blog</a>

    on 2015-01-16

        |
        tags:         <a href="./tag/howto.html">howto</a>
        <a href="./tag/openstack.html">openstack</a>
        <a href="./tag/vagrant.html">vagrant</a>



    
</footer><!-- /.post-info -->                                <p>If you want to use <a href="https://www.vagrantup.com">Vagrant</a> with <a href="http://www.openstack.org">OpenStack</a>, you need to prepare <a href="https://www.vagrantup.com">Vagrant</a> with installing the <a href="https://github.com/cloudbau/vagrant-openstack-plugin">vagrant-openstack-plugin</a>. I had some problems installing it directly through <code>vagrant plugin install</code>. I had to clone it from <a href="https://github.com">Github</a> and install it manually. </p>
<h2>One time configuration</h2>
<h3>Install OpenStack plugin in Vagrant</h3>
<div class="highlight"><pre>sudo apt-get install ruby1.9.1 git virtualbox
<span class="nb">cd</span> /tmp
<span class="c"># At writing moment the latest version of Vagrant is the following version.</span>
wget https://dl.bintray.com/mitchellh/vagrant/vagrant_1.7.2_x86_64.deb
sudo dpkg -i vagrant_1.7.2_x86_64.deb
git clone https://github.com/cloudbau/vagrant-openstack-plugin
<span class="nb">cd </span>vagrant-openstack-plugin
gem build vagrant-openstack-plugin.gemspec
vagrant plugin install vagrant-openstack-plugin-*.gem
</pre></div>


<p>Add a dummy box to <a href="https://www.vagrantup.com">Vagrant</a> thats needed by the plugin.</p>
<div class="highlight"><pre>vagrant box add dummy https://github.com/cloudbau/vagrant-openstack-plugin/raw/master/dummy.box
</pre></div>


<h3>Download OpenStack RC file</h3>
<ul>
<li>Log into OpenStack</li>
<li>Download OpenStack API RC file</li>
<li>Go to <code>Project</code> -&gt; <code>Compute</code> -&gt; <code>Access &amp; Security</code> -&gt; <code>API Access</code> </li>
<li>Down ...</li></ul>
                                <p class="readmore">
                                    <a class="btn btn-small btn-info" href="./posts/2015/01/vagrant-openstack.html">Read more...</a>
                                </p>
                            </div><!-- /.entry-content -->
                            <hr/>
                        </article>
                    </li>
                    </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
                </section><!-- /#content -->
</div>
<div class="span3">
    <section id="sidebar">
            <div>
                <h2>Browse content by</h2>
                <ul class="fa-ul">
                <li><a href="./categories.html"><i class="fa-li fa fa-tags"></i> Categories</a></li>
                <li><a href="./archives.html"><i class="fa-li fa fa-calendar"></i> Dates</a></li>
                <li><a href="./tags.html"><i class="fa-li fa fa-tag"></i> Tags</a></li>

                <li><a href="/feeds/all.atom.xml"><i class="fa-li fa fa-rss"></i> Feed</a></li>
                </ul>
            </div><!-- /.browse -->
            <div>
                <h2>Links</h2>
                <ul>
                    <li><a href="http://met.no/English">MET Norway</a></li>
                    <li><a href="http://yr.no">yr.no</a></li>
                </ul>
            </div><!-- /.Links -->
            <div>
                <h2>Tags</h2>
                <ul id="cloud">
                     <li class="tag-4"><a href="./tag/kitchen.html">kitchen</a></li>
                     <li class="tag-4"><a href="./tag/nova.html">nova</a></li>
                     <li class="tag-4"><a href="./tag/chef.html">chef</a></li>
                     <li class="tag-4"><a href="./tag/cloud-config.html">cloud-config</a></li>
                     <li class="tag-4"><a href="./tag/knife.html">knife</a></li>
                     <li class="tag-4"><a href="./tag/vagrant.html">vagrant</a></li>
                     <li class="tag-4"><a href="./tag/bootstrap.html">bootstrap</a></li>
                     <li class="tag-1"><a href="./tag/openstack.html">openstack</a></li>
                     <li class="tag-4"><a href="./tag/tools.html">tools</a></li>
                     <li class="tag-4"><a href="./tag/neutron.html">neutron</a></li>
                     <li class="tag-4"><a href="./tag/precise.html">precise</a></li>
                     <li class="tag-1"><a href="./tag/howto.html">howto</a></li>
                     <li class="tag-4"><a href="./tag/nova-boot.html">nova boot</a></li>
                     <li class="tag-4"><a href="./tag/kernel.html">kernel</a></li>
                     <li class="tag-4"><a href="./tag/oneliner.html">oneliner</a></li>
                     <li class="tag-4"><a href="./tag/bash.html">bash</a></li>
                     <li class="tag-4"><a href="./tag/examples.html">examples</a></li>
                     <li class="tag-4"><a href="./tag/presentations.html">presentations</a></li>
                     <li class="tag-4"><a href="./tag/glance.html">glance</a></li>
                     <li class="tag-4"><a href="./tag/visit.html">visit</a></li>
                     <li class="tag-4"><a href="./tag/code.html">code</a></li>
                     <li class="tag-4"><a href="./tag/cloud-init.html">cloud-init</a></li>
                     <li class="tag-4"><a href="./tag/ubuntu.html">ubuntu</a></li>
                </ul>
             </div>
<!-- /.Tags -->
    </section><!-- /#sidebar -->
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        This blog is proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                    </p>
                    <p>
                        <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a> is a responsive theme designed by <a href="http://jsliang.com/">jsliang</a> and <a href="https://github.com/jsliang/pelican-fresh/graphs/contributors">contributors</a>.
                        Special thanks to <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> and <a href="http://getbootstrap.com/">Twitter Bootstrap</a>.
                    </p>
                </address>
            </div>
        </div>
    </footer>

    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
</body>
</html>